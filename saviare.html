<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Formulario de Peligros</title>
<style>
  body { font-family: Arial, sans-serif; margin: 30px; }
  form { max-width: 400px; }
  label { display: block; margin-top: 15px; }
  input, textarea, select, button {
    width: 100%; padding: 8px; margin-top: 5px; box-sizing: border-box;
  }
  button { background: #28a745; color: white; border: none; cursor: pointer; }
  button:hover { background: #218838; }
</style>
</head>
<body>

<h2>Reporte de Peligro</h2>
<form id="peligroForm">
  <label>Fecha del peligro:
    <input type="date" name="fechaIncidente" required>
  </label>
  
  <label>Lugar del peligro / fase de vuelo:
    <input type="text" name="lugar" required>
  </label>

  <label>Base:
    <input type="text" name="base" required>
  </label>

  <label>Nombre:
    <input type="text" name="nombre" required>
  </label>

  <label>Cargo:
    <input type="text" name="cargo" required>
  </label>

  <label>Descripción del peligro / error humano:
    <textarea name="descripcion" rows="4" required></textarea>
  </label>

  <button type="submit">Enviar</button>
</form>

<p id="resultado"></p>

<script>
document.getElementById('peligroForm').addEventListener('submit', async function(e) {
  e.preventDefault();

  const data = {
    fechaIncidente: this.fechaIncidente.value,
    lugar: this.lugar.value,
    base: this.base.value,
    nombre: this.nombre.value,
    cargo: this.cargo.value,
    descripcion: this.descripcion.value
  };

  try {
    const response = await fetch("https://script.google.com/macros/s/AKfycbwYM-aswlaNTOCCl87x5vsfI7k0ZNlHBAhqrtwJG0MOzvUBuDW2tjOWXXb5xSGw7QO7/exec", {
      method: "POST",
      mode: "cors",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    });

    const result = await response.json();
    if (result.status === "ok") {
      document.getElementById('resultado').textContent = "✅ Datos enviados correctamente";
      this.reset();
    } else {
      document.getElementById('resultado').textContent = "❌ Error: " + result.message;
    }
  } catch (err) {
    document.getElementById('resultado').textContent = "⚠️ Error de conexión";
  }
});
</script>

</body>
</html>
