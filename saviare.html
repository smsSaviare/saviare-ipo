<form id="miFormulario">
  <label>Fecha del peligro:</label>
  <input type="date" name="fechaPeligro" required><br><br>

  <label>Lugar del peligro:</label>
  <input type="text" name="lugar" required><br><br>

  <label>Base:</label>
  <input type="text" name="base"><br><br>

  <label>Nombre:</label>
  <input type="text" name="nombre"><br><br>

  <label>Cargo:</label>
  <input type="text" name="cargo"><br><br>

  <label>Descripción:</label>
  <textarea name="descripcion"></textarea><br><br>

  <button type="submit">Enviar</button>
</form>

<script>
document.getElementById("miFormulario").addEventListener("submit", async function(e) {
  e.preventDefault();

  const datos = Object.fromEntries(new FormData(this).entries());

  try {
    const respuesta = await fetch(
      "https://script.google.com/macros/s/AKfycbwYM-aswlaNTOCCl87x5vsfI7k0ZNlHBAhqrtwJG0MOzvUBuDW2tjOWXXb5xSGw7QO7/exec",
      {
        method: "POST",
        body: JSON.stringify(datos),
        headers: { "Content-Type": "application/json" },
      }
    );

    const json = await respuesta.json();

    if (json.status === "ok") {
      alert("Datos enviados correctamente");
      this.reset();
    } else {
      alert("Error: " + json.message);
    }
  } catch (error) {
    alert("Error de conexión: " + error);
  }
});
</script>
